/*
JS Document
◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇
◎ *@Description: javascript Obj 基类
◎ *@Author: 谭生虎™       TanShenghu   TSH 
◎ *@Update: 2013-05-14
◎ *@Contact: ☎：13588428548      Email: tanshenghu@163.com   QQ：511568692
◎ *@AuthorNote: 请不要随便篡改文件内容。尊重他人劳动成果！谢谢...     谭生虎 注
◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇◆◇
*/
!function($,win){var tsh={},fnTsh={},doc=document,body="body";tsh.strs={correct:"\u2714",error:"\u2717"},tsh.clientWidth=function(){return doc.documentElement.clientWidth},tsh.clientHeight=function(){return doc.documentElement.clientHeight},tsh.scrollHeight=function(){return doc.documentElement.scrollHeight||doc.body.scrollHeight},tsh.scrollWidth=function(){return doc.documentElement.scrollWidth||doc.body.scrollWidth},tsh.scrollTop=function(){return doc.documentElement.scrollTop||doc.body.scrollTop},tsh.scrollLeft=function(){return doc.documentElement.scrollLeft||doc.body.scrollLeft},tsh.screenWH=function(a){var b=win.screen.width,c=win.screen.height;return"x"==a?b:"y"==a?c:b+"\xd7"+c},tsh.browserMsg=win.navigator.userAgent,tsh.browserAppName=navigator.appName,tsh.browserAppVersion=navigator.appVersion,tsh.IEDocMode=doc.documentMode,tsh.useBrowser=tsh.browserMsg.match(/msie 6./gim)?"IE6":tsh.browserMsg.match(/msie 7./gim)?"IE7":tsh.browserMsg.match(/msie 8./gim)?"IE8":tsh.browserMsg.match(/msie 9./gim)?"IE9":tsh.browserMsg.match(/msie 10./gim)?"IE10":tsh.browserMsg.match(/msie 11./gim)?"IE11":tsh.browserMsg.match(/firefox/gim)?"firefox":"webkit",tsh.isltIE8=~~tsh.useBrowser.replace(/IE/i,"")>0&&(tsh.IEDocMode<9||!tsh.IEDocMode||~~tsh.useBrowser.replace(/IE/i,"")<9),tsh.isltIE9=~~tsh.useBrowser.replace(/IE/i,"")>0&&(tsh.IEDocMode<10||!tsh.IEDocMode||~~tsh.useBrowser.replace(/IE/i,"")<10),tsh.isIE=/msie/gim.test(tsh.browserMsg),tsh.isPC=!/(iPhone|iPod|Android|ios|SymbianOS|Windows Phone|iPad)/gim.test(tsh.browserMsg),tsh.eleSupport=function(a,b,c){var d=doc.createElement(a),e="style"===c?d.style[b]:d[b];return d=null,void 0!==e},tsh.setCookie=function(a,b){var c,d="",e=arguments[2];d=a+"="+escape(b),void 0!=e&&(e=parseFloat(e),c=new Date,c.setDate(c.getDate()+e),d=d+"; expires="+c.toGMTString()),doc.cookie=d+"; path=/"},tsh.getCookie=function(a){var b=doc.cookie;CookArr=b.split("; ");for(var c in CookArr)if(CookArr[c].split("=")[0]==a)return unescape(CookArr[c].split("=")[1])},tsh.delCookie=function(a){var b,c="";b=new Date("1970/01/05"),b.setDate(b.getDate()),doc.cookie=a+"="+c+"; expires="+b.toGMTString()+"; path=/"},tsh.log=function(a,b,c){return"undefined"==typeof c&&"undefined"==typeof b&&"undefined"==typeof a?"":(c=c?c:"log",void(win.console&&console[c]&&console[c]("%c%s",b||"",a)))},tsh.remark=function(key){var key=key?eval("this."+key):this,result="",length=0,fnlen=0;key||this.log("\u8be5\u5bf9\u8c61\u4e0d\u5b58\u5728\uff01");for(var i in key)length++,"function"==typeof key[i]?(fnlen++,this.log("function => "+i,"color:red")):isNaN(key[i])?this.log("number => "+i,"color:green"):this.log(typeof key[i]+" => "+i);this.log("\u5171\u67e5\u627e\u5230 "+length+" \u4e2a\u5bf9\u8c61\uff0c\u5176\u4e2d\u65b9\u6cd5\u5bf9\u8c61 "+fnlen+" \u4e2a")},tsh.remark.demo=function(a){if(a){tsh.remark.key=a,$("#tsh_js_demo").remove();var b=doc.createElement("script");b.id="tsh_js_demo",b.setAttribute("onerror",'alert("api\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u8054\u7cfb\u4f5c\u8005-TanShenghu")'),b.src="//git.oschina.net/tanshenghu/myweb/raw/master/static/js/common_demo.js?_="+ +new Date,doc.body.appendChild(b)}},tsh.formRequest=function(a){function b(a){var b=a;return a instanceof jQuery||(b=$(b)),b}("string"==typeof a||a instanceof jQuery)&&(a={form:a});var c=b(a.form),d=a.selector?c.filter(a.selector).length?c.filter(a.selector):c.find(a.selector):null,e="way"in a?a.way:!0,f="formatHtml"in a?a.formatHtml:!0,g="trim"in a?a.trim:!0,h=$("<div/>"),i='[data-request="list"]',j=c.filter(i).add(c.find(i)),k="input[name],textarea[name],select[name]",l=null,m={},n=function(a){return f?h.text(a).html():a},o=function(b){return a.Encode?a.Encode(b):b},p=function(a){var b=arguments[1]||m,c=a.indexOf("."),d=arguments[2]||a,e=a.substring(0,0>c?1e3:c);return 0>c?(b[e]=m[d],delete m[d],"ok"):void p(a.substring(c+1),b[e]||(b[e]={}),d)};if(d)var q=(d.prop("nodeName")+"").toLowerCase(),r="input"==q||"textarea"==q||"select"==q;if(d&&e?l=c.find(r?d:d.find(k)):d&&!e?(l=c.find(k).not(r?d:d.find(k)),d.filter(i).length&&(j=j.not(d.filter(i))),d.find(i).length&&(j=j.not(d.find(i)))):l=c.find(k),j.length){l=l.not(j.find(k));var s=$.extend({},a);j=j.not(j.find(i)),s.selector=i+" "+i,s.way=!1,j.each(function(a,b){var c=$(b),d=c.find(".tsh-lineData"),e=c.attr("name")||"list";d=d.length?d:c.find("tbody tr"),m[e]=tsh.formRequest.getLineVals(d.not(d.find(d)),s)})}l.each(function(a,b){var c=$(b),d=c.attr("name"),e=c.attr("type")&&c.attr("type").toLowerCase();d&&e&&"radio"===e?c.is(":checked")&&(m[d]=n(o(g?$.trim(c.val()):c.val()))):d&&e&&"checkbox"===e?c.is(":checked")&&(m[d]?m[d].push(n(o(g?$.trim(c.val()):c.val()))):m[d]=l.filter(':checkbox:checked[name="'+d+'"]').length<2?n(o(g?$.trim(c.val()):c.val())):[n(o(g?$.trim(c.val()):c.val()))]):d&&(m[d]=n(o(g?$.trim(c.val()):c.val())))});var t=!1;if(a.split)for(var u in m)m[u]instanceof Array&&(m[u]=m[u].join(a.split)),a.nested===!0&&u.indexOf(".")>-1&&(t=!0)&&p(u);if(a.nested===!0&&t===!1)for(var u in m)u.indexOf(".")>-1&&p(u);return m},tsh.formRequest.getLineVals=function(a,b){a=$(a),b=$.extend({},b);var c=this,d=[];return a.each(function(){b.form=this,d.push(c(b))}),d},tsh.formFill={init:function(a){return this.url=a.url,this.type=a.type||"getJSON",this.param=a.param,this.form=$(a.form),this.depth=a.depth,this.cite=a.cite||"",this.isCreate=a.isCreate,this.callback=a.callback,this.fillLine=a.fillLine,this.MAP=a.map,this.url?this.getData():this.fillVal(this.param),this.form},getData:function(){var This=this,O=$.extend({_:+new Date},this.param),cite="data."+this.cite;$[This.type](this.url,O,function(data){This.fillVal(cite.length>5?eval(cite):data)},"JSON")},fillVal:function(data){var This=this,elesort=function(a,b,c){var d,e=a.length&&a.prop("nodeName").toLowerCase(),f=a.attr("type");return"input"===e?d=f:e?d=e:This.isCreate?(This.form.append('<input type="hidden" name="'+b+'" value="'+c+'">'),tsh.log(b+" Element is Null,creating...","color:green")):tsh.log(b+" Element is Null,need create!","color:#ffb401"),d},iscomplete=!0,setVal=function(a,b,c){switch(elesort(a,b,c)){case"text":a.val(c);break;case"hidden":a.val(c);break;case"url":a.val(c);break;case"email":a.val(c);break;case"tel":a.val(c);break;case"textarea":a.val(c);break;case"checkbox":a.filter('[value="'+c+'"]').prop("checked",!0);break;case"radio":a.filter('[value="'+c+'"]').prop("checked",!0);break;case"select":a.val(c);break;default:a.text(c)}};if(This.depth===!0)This.form.find('[name!=""]').each(function(i,ele){ele=$(ele);var KEY=$.trim(ele.attr("name"));if(KEY){var _V="";try{_V=eval("data."+KEY)}catch(e){tsh.log(KEY+" fail","color:red;font-weight:bold")}try{_V=This.MAP?eval("This.MAP."+KEY)[_V]||_V:_V}catch(e){tsh.log("Map:"+KEY+" fail","color:red")}"object"!=typeof _V?setVal(ele,KEY,_V):"function"==typeof This.fillLine&&This.fillLine.call(ele,_V,KEY)}});else for(var i in data){var dataval=data[i],ele=this.form.find('[name="'+i+'"]');(dataval===!0||dataval===!1||null===dataval)&&(dataval+=""),dataval=This.MAP&&This.MAP[i]?This.MAP[i][dataval]||dataval:dataval,"object"!=typeof dataval?setVal(ele,i,dataval):dataval instanceof Array?"function"==typeof this.fillLine&&this.fillLine.call(ele,dataval,i):(iscomplete=!1,tsh.log("warning: json layout!"))}"function"==typeof this.callback&&this.callback.apply(this.form,[iscomplete])}},tsh.getFileType=function(a){return"string"==typeof a?a.match(/\..+$/g)[0]:void 0},tsh.appendCss=function(a,b){if(""+a||b){var c=null,d=document.styleSheets.length;if("undefined"==typeof b?(b=a,a=void 0):0===(""+a).indexOf("#")?c=doc.getElementById(a.substr(1)):isNaN(a)||(a=+a,c=doc.getElementsByTagName("style")[a>=d?d-1:0>a?d+a:a]),!c||0===c.length){if(d>31)throw new TypeError("Style Tag gt 31");c=doc.createElement("style");var e=doc.getElementsByTagName("head")[0]||doc.documentElement;e.appendChild(c)}c.styleSheet?c.styleSheet.cssText+=b:c.appendChild(doc.createTextNode(b))}},tsh.dropDown=function(a){return a=$(a?a:".dropdownbox"),a.on("mousedown",function(a){var a=a||event,b=$(this);$(".dropdownbox").not(b).find(".dropDownContent").hide(),b.find(".dropDownContent a").length&&(!b.hasClass("disabled")&&b.find(".dropDownContent").slideDown("fast"),a.stopPropagation())}).find(".dropDownContent").on("click",'a:not(".disabled")',function(){var a=$(this),b=a.closest(".dropdownbox"),c=b.children(".cinput"),d=b.data("callfn");"input"===c.prop("nodeName").toLowerCase()?c.val(a.html()).attr("key",a.attr("key")||"").focus():c.text(a.html()).attr("key",a.attr("key")||""),a.attr("selected","selected").siblings("a").removeAttr("selected").end().parent().slideUp("fast"),d&&d.callback&&"function"==typeof d.callback&&d.callback.apply(this,[])}).prevAll(":text").prop("readonly",!0),a},tsh.popupBox=function(a){function b(){var a=d.find(".dialog-title"),b={ON:!1};$(doc).on("mouseup",function(){a.css("cursor","default"),b.ON=!1}).on("mousemove",function(a){if(a=a||event,b.ON){var c=Math.min(a.clientX-b.L,b.BW),d=Math.min(a.clientY-b.T,b.BH);c=Math.max(c,0),d=Math.max(d,0),b.dialog.css({left:c+"px",top:d+"px"})}}),a.on("mousedown",function(c){c=c||event;var d=$(this);d.css("cursor","move"),b.L=c.clientX-d.offset().left,b.T=c.clientY-d.offset().top,b.dialog=a.closest('[poptype="tsh-popbox"]'),b.BW=doc.documentElement.clientWidth-b.dialog.outerWidth(!0),b.BH=doc.documentElement.clientHeight-b.dialog.outerHeight(!0),b.ON=!0})}var c=a.hand instanceof Array?a.hand[1]:$(a.hand),d=$(a.box),e="undefined"==typeof a.cover?!0:a.cover,f=a.zIndex||1e3,g=a.drag,h=a.fixed===!0?"fixed":"absolute",i=0,j=0,k=parseInt(a.width),l=parseInt(a.height),m=0,n=0,o=a.callback,p=a.hidefn,q=a.okfn,r=null,s=$(body);if(!d.length)return void this.log("error:not "+a.box,"color:red");d.parent().prop("nodeName").toLowerCase()!=body&&s.append(d),d.attr("cover",e);var t=$($("#coverPop").length?"#coverPop":'<div id="coverPop"></div>');t.css({position:"fixed","z-index":f-1,left:"0",top:"0",right:"0",bottom:"0",display:"none","background-color":"black",opacity:"0.5"});var u=function(b){i=doc.documentElement.clientWidth,j=doc.documentElement.clientHeight,m=$(doc).scrollTop()||0,n=$(doc).scrollLeft()||0,a.width||(k=d.show().css("visibility",b===!0?"":"hidden").width()),a.height||(l=d.show().css("visibility",b===!0?"":"hidden").height());var c=0>.5*(i-k)?0:.5*(i-k)>i-k?i-k:.5*(i-k),e=0>.5*(j-l)?0:.5*(j-l)>j-l?j-l:.5*(j-l),g={position:h,"z-index":f,display:b===!0?"block":"none",left:c+n,"background-color":"white",top:e+m};return b!==!0&&d.hide().css("visibility",""),g},v=u();v.width=a.width?a.width:"auto",v.height=a.height?a.height:"auto",d.css(v),e&&d.before(t);var w=function(a){var b=!$(a).hasClass("disabled");return(void 0===typeof a||b)&&(d.css(u()),e&&t.css("z-index",d.css("z-index")-1).show(),d.show(),b&&"function"==typeof o&&o.apply(a,[d])),d},x=function(a){var b=$(a),c=s.children('[poptype="tsh-popbox"]'),f=c.not(d),g=c.length-1===c.filter(":hidden").length||0===f.filter('[cover="true"]:visible').length;if("i"!==(b.prop("nodeName")+"").toLowerCase()&&b.hasClass("disabled"))return"input is disabled!";if(e&&g)t.hide();else if(!g){var h=0;f.filter('[cover="true"]:visible').each(function(){h=Math.max(h,$(this).css("zIndex"))}),h&&t.css("zIndex",h-1)}return d.hide(),"function"==typeof p&&p.apply(r,[this,d,!(!a||!a.nodeName)]),d};return"string"==typeof c?$(a.hand[0]).on("click",c,function(){r=this,w(this)}):c.on("click",function(){r=this,w(this)}),g&&b(),d.on("click",".ui-okBtn",function(){"function"==typeof q&&q.apply(r,[this,d])}),d.on("click",".closeMe",function(){x(this)}),d.attr("poptype","tsh-popbox"),d.Show=w,d.Hide=x,d.reSetPos=function(a){return d.css($.extend(u(!0),a))},d},tsh.getRequest=function(){var a={},b=arguments[0],c=b?b.substring(b.indexOf("?")):doc.location.search;if(-1==c.indexOf("?"))return a;c=c.substring(1);for(var d=c.split("&"),e=0,f=d.length;f>e;e++){var g=d[e].split("=");a[g[0]]=g[1]}return a},tsh.concatUrl=function(a,b){if(b||(b=a,a=void 0),"object"==typeof b){var c={},d="";$.extend(c,this.getRequest(a),b);for(var e in c)null!==c[e]&&(d+=e+"="+c[e]+"&");return d=d.rtrim(),a=(a||location.pathname).replace(/\?(.+)/,""),a+=d.length?"?"+d:""}},tsh.checkTab=function(a){var b=$(a.hand),c=a.box,d=a.clsName||"current",e=a.evt||"click",f=a.callback;return $(b).on(e,function(){var a=$(this),e=c?c:a.parent().data("target"),g=a.index(b.selector);a.addClass(d).siblings(b).removeClass(d),$(e).eq(g).show().siblings(e).hide(),"function"==typeof f&&f.apply(a,[g,$(e)])}),b},tsh.formSubmit=function(a){var b="";if($('#tsh-ifm,form[target="tsh-ifm"]').remove(),a.param){if(!a.action)throw new Error("form action is undefined");if(a.form=$('<form action="'+a.action+'" method="'+("post"==(a.method+"").toLowerCase()?"post":"get")+'" target="tsh-ifm" style="position:absolute;left:-1000px;top:-1000px;width:1px;height:1px;overflow:hidden"></form>'),Array.isArray(a.param))a.param.forEach(function(b){"undefined"==typeof(b.name||b.key)||a.form.append('<input type="hidden" name="'+(b.name||b.key)+'" value="'+b.value+'">')});else for(var c in a.param)a.form.append('<input type="hidden" name="'+c+'" value="'+a.param[c]+'">');a.form.appendTo(body)}else if(a.form){if(a.form=$(a.form),!a.form.length)throw new Error("form is undefined");b=a.form.attr("target"),a.form.attr("target","tsh-ifm")}var d=$('<iframe src="about:blank" '+(a.enctype===!0?'enctype="multipart/form-data"':"")+' id="tsh-ifm" name="tsh-ifm"><iframe>');return d.css({position:"absolute",left:"-1000px",top:"-1000px",width:1,height:1,overflow:"hidden"}),d.appendTo(body).on("load",function(){if("function"==typeof a.callback){var b=d.contents().text().replace(/^\s+|\s+$/gm,"");try{b=$.parseJSON(b)}catch(c){}a.callback.apply(a.form,[d,b])}setTimeout(function(){d.remove(),d=null,a.param&&(a.form.remove(),a.form=null)},30)}),a.form.trigger("submit"),a.param||a.form[b?"attr":"removeAttr"]("target",b),a.form},$.tsh=tsh;var detectZoom=function(){var a=0,b=win.screen,c=navigator.userAgent.toLowerCase();if(void 0!==win.devicePixelRatio?a=win.devicePixelRatio:~c.indexOf("msie")?b.deviceXDPI&&b.logicalXDPI&&(a=b.deviceXDPI/b.logicalXDPI):void 0!==win.outerWidth&&void 0!==win.innerWidth&&(a=win.outerWidth/win.innerWidth),a&&(a=Math.round(100*a)),100!==a){var d=tsh.browserMsg.indexOf("Mac OS X")>-1,e=d?"command+0":"control+0",f="\u76d1\u6d4b\u5230\u60a8\u7684\u6d4f\u89c8\u5668\u7f29\u653e\u6bd4\u4f8b\u504f<b>"+(100>a?"\u5c0f":"\u5927")+"</b>\uff0c\u4e3a\u4e86\u4e0d\u5f71\u54cd\u60a8\u6b63\u5e38\u6d4f\u89c8\u7f51\u9875\uff0c\u8bf7\u6062\u590d\u81f3\u9ed8\u8ba4\u72b6\u6001\uff0c\u6309<b>"+e+"</b>\u952e",g='<div id="_SYS-zoomTip" style="height:30px;line-height:30px;text-align:center;position:fixed;left:0;top:0;width:100%;"><p style="background:#ffebd0;position:absolute;width:100%;height:100%;left:0;top:0;"></p><label style="color:red;position:absolute;left:0;top:0;width:100%;height:100%;">'+f+'</label><a href="javascript:;" style="position:absolute;right:20px;top:5px;font-size:20px;color:red;width:20px;height:20px;line-height:20px;text-decoration:none;" title="\u5173\u95ed" onclick="this.parentNode.style.display=\'none\'">&times;</a></div>';$(body).append(g)}return a};fnTsh.gridSort={sort:function(a,b,c){return this.srt=c||"desc",this.idx=parseInt(b),this.tbody=$(a),this.contrast(),this.tbody},contrast:function(){var a=this,b=[],c=[];this.tbody.find("tr").each(function(d,e){b.push(e);var f=$(e).children().eq(a.idx);c.push(f.text())}),c.sort(function(b,c){return b=parseFloat(a.filter(b)),c=parseFloat(a.filter(c)),"asc"===a.srt?c>b?-1:1:b>c?-1:1});var d=a.newsortobj(b,c);a.tbody.empty();for(var e=0,f=d.length;f>e;e++)a.tbody.append(d[e])},filter:function(a){return a.replace(/\D+/gm,"")},newsortobj:function(a,b){for(var c=this,d={length:0},e=0,f=b.length;f>e;e++)for(var g=b[e],h=0,i=a.length;i>h;h++)$(a[h]).children().eq(c.idx).text()==g&&(d[d.length]=$(a[h]),d.length+=1);return d}},fnTsh.validate={init:function(a,b){return this.form=$(a),this.log=b,this.blur(),this.form.find(".formTip").remove(),this.form.find(".verify-err").removeClass("verify-err"),this.verify()&&0===this.form.find(".formTip").length},getele:function(){return this.form.find("[data-needverify]").not("[verifyignore]")},verify:function(){var a=this,b=this.getele(),c={result:!0};return b.each(function(b,d){c=a.getrules(d),"log"==a.log&&!c.result&&tsh.log(d.name+".value="+d.value+"->"+c.rulesName,"color:red")}),c.result},getrules:function(a){var b=$(a).data("needverify"),c=!0,d="";if(b)for(var e=b.split(","),f=0,g=e.length;g>f;f++)if(c=this.exeRules({rls:e[f],ele:a,curRules:f}),c===!1){d=e[f];break}return{result:c,rulesName:d}},exeRules:function(a){var b=a.rls,c=a.ele,d=a.curRules;if("function"==typeof this.rules[b]){var e=this.rules[b].apply(this.form,[c]);return this.showmsg({result:e,ele:c,curRules:d,rls:b}),e}tsh.log(b+" erroneous rules")},rules:{required:function(a){var b,a=$(a),c=a.attr("type")&&a.attr("type").toLowerCase(),d=this;if("radio"===c||"checkbox"===c){var e=a.attr("name"),f=d.find('[name="'+e+'"]:checked');b=0===f.length?!1:!0}else b=0===$.trim(a.val()).length?!1:!0;return b},"int":function(a){return/^\d+$|^$/.test($(a).val())}},verifymsg:{required:"\u5fc5\u586b","int":"\u8bf7\u8f93\u5165\u6574\u6570"},showmsg:function(a){var b=a.result,c=$(a.ele),d=a.curRules,e=a.rls,f=c.closest("td,.formfield"),g=c.data("verifymsg")?c.attr("data-verifymsg").split("|"):[],h=g[d]||this.verifymsg[e]||"\u9519\u8bef";b===!1?(c.addClass("verify-err"),f.find(".formTip").length?f.find(".formTip").first().html(h).attr("inputname",c.attr("name")):f.append($('<p class="formTip">'+h+"</p>").attr("inputname",c.attr("name")))):(c.is(":radio,:checkbox")?this.form.find(':radio[name="'+c.attr("name")+'"],:checkbox[name="'+c.attr("name")+'"]').removeClass("verify-err"):c.removeClass("verify-err"),f.find(".formTip").attr("inputname")==c.attr("name")&&f.find(".formTip").remove())},blurIdx:0,blur:function(){var a=this;if(this.blurIdx<1){var a=this;$(body).on("blur change","[data-needverify]",function(){$(this).attr("verifyignore")||a.getrules(this)})}this.blurIdx++}},fnTsh.eleCoor=function(a){for(var b={x:0,y:0};a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop,a=a.offsetParent;return b},win.fnTsh=fnTsh,fnTsh.isType=function(a,b){return{}.toString.call(a)==="[object "+b+"]"},"".trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/gm,"")}),"".rtrim||(String.prototype.rtrim=function(a){var b="";if(a){var c=this.lastIndexOf(a);b=this.substring(0,0>c?this.length:c)+(0>c?"":this.substring(c+1))}else b=this.replace(/.$/gm,"");return b}),"".ltrim||(String.prototype.ltrim=function(a){var b="";if(a){var c=this.indexOf(a);b=this.substring(0,0>c?this.length:c)+(0>c?"":this.substring(c+1))}else b=this.replace(/^./gm,"");return b}),Date.now||(Date.now=function(){return+new Date}),[].removeItem||(Array.prototype.removeItem=function(a,b){var c=!1,d=[];for(var e in this)this[e]!==a||c||(d.push(this.splice(e,1)),b||(c=!0));return d}),Array.prototype.removeRepeat=function(){for(var a={},b=[],c=0,d=this.length;d>c;c++){var e=typeof this[c]+this[c];void 0===a[e]&&(b.push(this[c]),a[e]="yes")}return b},[].indexOf||(Array.prototype.indexOf=function(a){var b=this.length>>>0,c=Number(arguments[1])||0;for(c=0>c?Math.ceil(c):Math.floor(c),0>c&&(c+=b);b>c;c++)if(c in this&&this[c]===a)return c;return-1}),Array.isArray||(Array.isArray=function(a){return fnTsh.isType(a,"Array")}),[].forEach||(Array.prototype.forEach=function(a){if("function"!=typeof a)throw new TypeError(a+" is not a function");var b,c=arguments[1]||win;if("string"==typeof arguments[1]){var d={};[].push.apply(d,arguments[1].split("")),c=d}for(var e=0,f=this.length;f>e&&(b=a.apply(c,[this[e],e,this]),b!==!1);e++);}),[].filter||(Array.prototype.filter=function(a){if("function"!=typeof a)throw new TypeError(a+" is not a function");var b=arguments[1]||win,c=[];if("string"==typeof arguments[1]){var d={};[].push.apply(d,arguments[1].split("")),b=d}for(var e=0,f=this.length;f>e;e++)a.apply(b,[this[e],e,this])===!0&&c.push(this[e]);return c}),[].map||(Array.prototype.map=function(a){if("function"!=typeof a)throw new TypeError(a+" is not a function");var b=arguments[1]||win,c=[];if("string"==typeof arguments[1]){var d={};[].push.apply(d,arguments[1].split("")),b=d}for(var e=0,f=this.length;f>e;e++)c.push(a.apply(b,[this[e],e,this]));return c}),[].every||(Array.prototype.every=function(a){if("function"!=typeof a)throw new TypeError(a+" is not a function");var b=arguments[1]||win,c=!0;if("string"==typeof arguments[1]){var d={};[].push.apply(d,arguments[1].split("")),b=d}for(var e=0,f=this.length;f>e&&(c=a.apply(b,[this[e],e,this]),c!==!1);e++);return c}),[].some||(Array.prototype.some=function(a){if("function"!=typeof a)throw new TypeError(a+" is not a function");var b=arguments[1]||win,c=!1;if("string"==typeof arguments[1]){var d={};[].push.apply(d,arguments[1].split("")),b=d}for(var e=0,f=this.length;f>e&&(c=a.apply(b,[this[e],e,this]),c!==!0);e++);return c}),Function.prototype.bind||(Function.prototype.bind=function(){if("function"!=typeof this)throw new TypeError("this object is not Function!");var a=this,b=[].slice.call(arguments,0);return function(){a.apply(b.shift(),b)}}),Date.prototype.format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a},win.getComputedStyle&&"function"==typeof win.getComputedStyle||(win.getComputedStyle=function(a){var b=a.nodeName?a:a.get(0);return b.currentStyle?b.currentStyle:doc.defaultView.getComputedStyle(b,null)});for(var vendors=["webkit","moz"],lastTime=0,x=0;x<vendors.length&&!win.requestAnimationFrame;++x)win.requestAnimationFrame=win[vendors[x]+"RequestAnimationFrame"],win.cancelAnimationFrame=win[vendors[x]+"CancelAnimationFrame"]||win[vendors[x]+"CancelRequestAnimationFrame"];win.requestAnimationFrame||(win.requestAnimationFrame=function(a){var b=+new Date,c=Math.max(0,16.7-(b-lastTime)),d=win.setTimeout(function(){a(b+c)},c);return lastTime=b+c,d}),win.cancelAnimationFrame||(win.cancelAnimationFrame=function(a){clearTimeout(a)}),fnTsh.milliFormat=function(a){var b,c,d;return a+="",a=a.replace(/,/g,""),a=a.replace(/^0+/,""),b=a.match(/(^\d+)(\.\d*)?$/),b?(c=b[2]||"",d=b[1],d=d.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),d+c):""},$(function(){$(doc).on("mousedown",function(){$(this).find(".dropDownContent:visible").hide()}),tsh.isPC&&detectZoom()})}(jQuery,this);